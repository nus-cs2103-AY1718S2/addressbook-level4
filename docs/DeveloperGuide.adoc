= ContactSails - Developer Guide
:toc:
:toc-title:
:toc-placement: preamble
:sectnums:
:imagesDir: images
:stylesDir: stylesheets
:xrefstyle: full
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
endif::[]
:repoURL: https://github.com/CS2103JAN2018-W13-B1/main/tree/master

By: `Team W13-B1`      Since: `Mar 2018`      Licence: `MIT`

== Introduction

ContactSails is a desktop application targeted at salespersons who want to manage their customer contacts, sales orders,
and calendar events in an efficient manner. +

This guide provides the necessary technical information for those
who might want to join our team as a software developer or a tester,
or for those who want to develop an entirely different product by using ContactSails as a base. +

The following points illustrate what information this guide provides:

1. Details about the software architecture and how each component of the application is designed. +
2. Implementation details of some noteworthy features in the application. +
3. Details about software testing, documentation, and dev ops.

== Setting up

This section will guide you in setting up the developer environment on your computer for coding and testing purposes.

=== Prerequisites

Ensure that you have the following prerequisites for successfully setting up the developer environment:

. *JDK `1.8.0_60`* or later
+

The Java JDK is a software development kit that includes a runtime environment and tools for developing, debugging, and
monitoring Java applications.
You can download it http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html[here].
+

[NOTE]
This app will not work with earlier versions of Java 8, so ensure that you have installed the right version of Java 8.
+

. *IntelliJ* IDEA
+

IntelliJ IDEA is a Java integrated development environment for developing computer software.
You can download the (free) community edition https://www.jetbrains.com/idea/download/[here].
+

[NOTE]
IntelliJ by default has Gradle and JavaFx plugins installed. +
Do not disable them. If you have disabled them, go to `File` > `Settings` > `Plugins` to re-enable them.


=== Setting up the project on your computer

Follow these steps to set up the project on your computer:

. Fork this repo, and clone the fork to your computer.
. Open IntelliJ (if you are not in the welcome screen, click `File` > `Close Project` to close the existing project dialog first).
. Set up the correct JDK version for Gradle:
.. Click `Configure` > `Project Defaults` > `Project Structure`.
.. Click `New...` and find the directory of the JDK.
. Click `Import Project`.
. Locate the `build.gradle` file and select it. Click `OK`.
. Click `Open as Project`.
. Click `OK` to accept the default settings.
. Open a console and run the command `gradlew processResources` (Mac/Linux: `./gradlew processResources`). It should finish with the `BUILD SUCCESSFUL` message. +
This will generate all resources required by the application and tests.

=== Verifying the setup

Follow these steps to verify that the project has been setup correctly:

. Run the `seedu.address.MainApp` and try a few commands.
. <<Testing,Run the tests>> to ensure they all pass.

=== Configurations to do before writing code

This section provides information on the additional configurations that you need to setup before you can start writing code.

==== Configuring the coding style

This project follows https://github.com/oss-generic/process/blob/master/docs/CodingStandards.adoc[oss-generic coding standards]. IntelliJ's default style is mostly compliant with ours but it uses a different import order from ours. +

To use the correct coding style, follow these steps:

. Go to `File` > `Settings...` (Windows/Linux), or `IntelliJ IDEA` > `Preferences...` (macOS).
. Select `Editor` > `Code Style` > `Java`.
. Click on the `Imports` tab to set the order:

* For `Class count to use import with '\*'` and `Names count to use static import with '*'`: Set to `999` to prevent IntelliJ from contracting the import statements.
* For `Import Layout`: The order is `import static all other imports`, `import java.\*`, `import javax.*`, `import org.\*`, `import com.*`, `import all other imports`. Add a `<blank line>` between each `import`.

Optionally, you can follow the https://github.com/CS2103JAN2018-W13-B1/main/blob/master/docs/UsingCheckstyle.adoc[UsingCheckstyle.adoc] document to configure Intellij to check style-compliance as you write code.

==== Updating documentation to match your fork

After forking the repo, links in the documentation will still point to the `CS2103JAN2018-W13-B1/main` repo. If you plan to develop this as a separate product (i.e. instead of contributing to the `CS2103JAN2018-W13-B1/main` repo), you should replace the URL in the variable `repoURL` in `DeveloperGuide.adoc` and `UserGuide.adoc` with the URL of your fork.

==== Setting up CI

Set up Travis to perform Continuous Integration (CI) for your fork. See https://github.com/CS2103JAN2018-W13-B1/main/blob/master/docs/UsingTravis.adoc[UsingTravis.adoc] to learn how to set it up.

After setting up Travis, you can optionally set up coverage reporting for your team fork see https://github.com/CS2103JAN2018-W13-B1/main/blob/master/docs/UsingCoveralls.adoc[UsingCoveralls.adoc].

[NOTE]
Coverage reporting could be useful for a team repository that hosts the final version but it is not that useful for your personal fork.

Optionally, you can set up AppVeyor as a second CI see https://github.com/CS2103JAN2018-W13-B1/main/blob/master/docs/UsingAppVeyor.adoc[UsingAppVeyor.adoc].

[NOTE]
Having both Travis and AppVeyor ensures your App works on both Unix-based platforms and Windows-based platforms (Travis is Unix-based and AppVeyor is Windows-based)

==== Getting started with coding

When you are ready to start coding,

1. Get some sense of the overall design by reading <<Design-Architecture>>.
2. Take a look at <<GetStartedProgramming>>.

== Design

The following section provides information about the software architecture of ContactSails and how each of its components are designed.

[[Design-Architecture]]
=== Architecture

The *_Architecture Diagram_* given below (Figure 1) explains the high-level design of the App.

.Architecture Diagram
image::Architecture.png[width="600" align="center"]

[TIP]
The `.pptx` files used to create diagrams in this document can be found in the link:{repoURL}/docs/diagrams/[diagrams] folder. To update a diagram, modify the diagram in the pptx file, select the objects of the diagram, and choose `Save as picture`.

Given below is a quick overview of each component.

`Main` has only one class called link:{repoURL}/src/main/java/seedu/address/MainApp.java[`MainApp`].
It does the following:

* At app launch: Initializes the components in the correct sequence, and connects them up with each other.
* At shut down: Shuts down the components and invokes cleanup method where necessary.

<<Design-Commons,*`Commons`*>> represents a collection of classes used by multiple other components.
Two of those classes, `EventsCenter` and `LogsCenter`, play important roles at the architecture level.
Given below is a description of what each of those classes do:

* `EventsCenter` : This class (written using https://github.com/google/guava/wiki/EventBusExplained[Google's Event Bus library]) is used by components to communicate with other components using events (i.e. a form of _Event Driven_ design).
* `LogsCenter` : This class is used by many classes to write log messages to the App's log file.

The rest of the App consists of four components:

1. <<Design-Ui,*`UI`*>>: The UI of the App.
2. <<Design-Logic,*`Logic`*>>: The command executor.
3. <<Design-Model,*`Model`*>>: Holds the data of the App in-memory.
4. <<Design-Storage,*`Storage`*>>: Reads data from and writes data to the hard disk.

Each of the four components does the following:

* Defines its _API_ in an `interface` with the same name as the Component.
* Exposes its functionality using a `{Component Name}Manager` class.

For example, the `Logic` component (see Figure 2 below) defines it's API in the `Logic.java` interface and exposes its functionality using the `LogicManager.java` class.

.Class Diagram of the Logic Component
image::LogicClassDiagram.png[width="800" align="center"]

[discrete]
==== Events-Driven nature of the design

The _Sequence Diagram_ (Figure 3) below shows how the components interact for the scenario where the user issues the command `delete 1`.

.Component interactions for `delete 1` command (part 1)
image::SDforDeletePerson.png[width="800" align="center"]

[NOTE]
Note how the `Model` simply raises a `AddressBookChangedEvent` when the Address Book data are changed, instead of asking the `Storage` to save the updates to the hard disk.

The _Sequence Diagram_ (Figure 4) below shows how `EventsCenter` reacts to that event, which eventually results in the updates being saved to the hard disk and the status bar of the UI being updated to reflect the 'Last Updated' time.

.Component interactions for `delete 1` command (part 2)
image::SDforDeletePersonEventHandling.png[width="800" align="center"]

[NOTE]
Note how the event is propagated through the `EventsCenter` to the `Storage` and `UI` without `Model` having to be coupled to either of them. This is an example of how this Event Driven approach helps us reduce direct coupling between components.

The sections below give more details of each component.

[[Design-Ui]]
=== UI Component

The `UI` Component consists of a `MainWindow` that is made up of parts e.g.`CommandBox`, `ResultDisplay`, `PersonListPanel`, `StatusBarFooter`, `BrowserPanel` etc. All these, including the `MainWindow`, inherit from the abstract `UiPart` class.
Figure 5 below shows the structure of the `UI` component.

.Structure of the UI Component
image::UiClassDiagram.png[width="800" align="center"]

*API* for the `UI` Component: link:{repoURL}/src/main/java/seedu/address/ui/Ui.java[`Ui.java`]

The `UI` Component uses JavaFx UI framework. The layout of these UI parts are defined in matching `.fxml` files that are in the `src/main/resources/view` folder. For example, the layout of the link:{repoURL}/src/main/java/seedu/address/ui/MainWindow.java[`MainWindow`] is specified in link:{repoURL}/src/main/resources/view/MainWindow.fxml[`MainWindow.fxml`]

The `UI` Component does the following:

. Executes user commands using the `Logic` component.
. Binds itself to some data in the `Model` so that the UI can auto-update when data in the `Model` change.
. Responds to events raised from various parts of the App and updates the UI accordingly.

[[Design-Logic]]
=== Logic Component

The `Logic` Component deals with how each command would be parsed and executed in an event-driven design.
Figure 6 below shows the structure of the `Logic` Component.

[[fig-LogicClassDiagram]]
.Structure of the Logic Component
image::LogicClassDiagram.png[width="800" align="center"]

.Structure of Commands in the Logic Component.
image::LogicCommandClassDiagram.png[width="800" align="center"]

This diagram above (Figure 7) shows the finer details concerning `XYZCommand` and `Command` in <<fig-LogicClassDiagram>>

*API* for the `Logic` Component:
link:{repoURL}/src/main/java/seedu/address/logic/Logic.java[`Logic.java`]

The `Logic` Component does the following:

.  `Logic` uses the `AddressBookParser` class to parse the user command.
.  This results in a `Command` object which is executed by the `LogicManager`.
.  The command execution can affect the `Model` (e.g. adding a person) and/or raise events.
.  The result of the command execution is encapsulated as a `CommandResult` object which is passed back to the `Ui`.

Given below is the _Sequence Diagram_ (Figure 8) for interactions within the `Logic` component for the `execute("delete 1")` API call.

.Interactions Inside the Logic Component for the `delete 1` Command
image::DeletePersonSdForLogic.png[width="800" align="center"]

[[Design-Model]]
=== Model Component

The `Model` Component handles the contacts, orders, and events in the address book and all their stored details in data structures.
These structures also provide APIs to create, read, update and delete the details of these objects.
Figure 9 below shows the structure of the `Model` Component.

.Structure of the `Model` Component
image::ModelClassDiagram.png[width="800" align="center"]

*API* for the `Model` Component: link:{repoURL}/src/main/java/seedu/address/model/Model.java[`Model.java`]

The `Model` Component does the following:

. Stores a `UserPref` object that represents the user's preferences.
. Stores the Address Book data.
. Exposes an unmodifiable `ObservableList<Person>` that can be 'observed' e.g. the UI can be bound to this list so that the UI automatically updates when the data in the list change.

[[Design-Storage]]
=== Storage Component

The `Storage` Component handles the storing of data in the address book on the local computer.
Figure 10 below shows the structure of the `Storage` Component.

.Structure of the Storage Component
image::StorageClassDiagram.png[width="800" align="center"]

*API* for the `Storage` Component: link:{repoURL}/src/main/java/seedu/address/storage/Storage.java[`Storage.java`]

The `Storage` Component does the following:

. Saves `UserPref` objects in .json format and reads it back.
. Saves the Address Book data in .xml format and reads it back.

[[Design-Commons]]
=== Common classes

Classes used by multiple components are in the `seedu.addressbook.commons` package.

== Implementation

This section describes some noteworthy details on how certain features are implemented.

// tag::undoredo[]
=== Undo/Redo feature

This feature allows users to undo and redo certain commands executed in the current session.

==== Current Implementation

The undo/redo mechanism is facilitated by an `UndoRedoStack`, which resides inside `LogicManager`. It supports undoing and redoing of commands that modifies the state of the address book (e.g. `add`, `edit`). Such commands will inherit from `UndoableCommand`.

`UndoRedoStack` only deals with `UndoableCommands`. Commands that cannot be undone will inherit from `Command` instead. The following diagram shows the inheritance diagram for commands.

.Inheritance Diagram for commands in `Logic` Component
image::LogicCommandClassDiagram.png[width="800" align="center"]

As you can see from the diagram, `UndoableCommand` adds an extra layer between the abstract `Command` class and concrete commands that can be undone, such as the `DeleteCommand`. Note that extra tasks need to be done when executing a command in an _undoable_ way, such as saving the state of the address book before execution. `UndoableCommand` contains the high-level algorithm for those extra tasks while the child classes implements the details of how to execute the specific command. Note that this technique of putting the high-level algorithm in the parent class and lower-level steps of the algorithm in child classes is also known as the https://www.tutorialspoint.com/design_pattern/template_pattern.htm[template pattern].

Commands that are not undoable are implemented this way:
[source,java]
----
public class ListCommand extends Command {
    @Override
    public CommandResult execute() {
        // ... list logic ...
    }
}
----

With the extra layer, the commands that are undoable are implemented this way:
[source,java]
----
public abstract class UndoableCommand extends Command {
    @Override
    public CommandResult execute() {
        // ... undo logic ...

        executeUndoableCommand();
    }
}

public class DeleteCommand extends UndoableCommand {
    @Override
    public CommandResult executeUndoableCommand() {
        // ... delete logic ...
    }
}
----

Suppose that the user has just launched the application. The `UndoRedoStack` will be empty at the beginning.

The user executes a new `UndoableCommand`, `delete 5`, to delete the 5th person in the address book. The current state of the address book is saved before the `delete 5` command executes. The `delete 5` command will then be pushed onto the `undoStack` (the current state is saved together with the command).

.UndoRedoStack before and after executing 1 Delete Command
image::UndoRedoStartingStackDiagram.png[width="800" align="center"]

As the user continues to use the program, more commands are added into the `undoStack`. For example, the user may execute `add n/David ...` to add a new person.

.UndoRedoStack before and after Executing 1 Add Command
image::UndoRedoNewCommand1StackDiagram.png[width="800" align="center"]

[NOTE]
If a command fails its execution, it will not be pushed to the `UndoRedoStack` at all.

The user now decides that adding the person was a mistake, and decides to undo that action using `undo`.

We will pop the most recent command out of the `undoStack` and push it back to the `redoStack`. We will restore the address book to the state before the `add` command executed.

.UndoRedoStack before and after executing Undo Command
image::UndoRedoExecuteUndoStackDiagram.png[width="800" align="center"]

[NOTE]
If the `undoStack` is empty, then there are no other commands left to be undone, and an `Exception` will be thrown when popping the `undoStack`.

The following sequence diagram shows how the undo operation works:

.Sequence Diagram for executing Undo Command
image::UndoRedoSequenceDiagram.png[width="800" align="center"]

The redo does the exact opposite (pops from `redoStack`, push to `undoStack`, and restores the address book to the state after the command is executed).

[NOTE]
If the `redoStack` is empty, then there are no other commands left to be redone, and an `Exception` will be thrown when popping the `redoStack`.

The user now decides to execute a new command, `clear`. As before, `clear` will be pushed into the `undoStack`. This time the `redoStack` is no longer empty. It will be purged as it no longer make sense to redo the `add n/David` command (this is the behavior that most modern desktop applications follow).

.UndoRedoStack before and after executing Clear Command
image::UndoRedoNewCommand2StackDiagram.png[width="800" align="center"]

Commands that are not undoable are not added into the `undoStack`. For example, `list`, which inherits from `Command` rather than `UndoableCommand`, will not be added after execution:

.UndoRedoStack before and after executing List Command
image::UndoRedoNewCommand3StackDiagram.png[width="800" align="center"]

The following activity diagram summarize what happens inside the `UndoRedoStack` when a user executes a new command:

.Execution Path when Undoable Commands
image::UndoRedoActivityDiagram.png[width="650" align="center"]

==== Design Considerations

===== Aspect: Implementation of `UndoableCommand`

* **Alternative 1 (current choice):** Add a new abstract method `executeUndoableCommand()`
** Pros: We will not lose any undone/redone functionality as it is now part of the default behaviour. Classes that deal with `Command` do not have to know that `executeUndoableCommand()` exist.
** Cons: Hard for new developers to understand the template pattern.
* **Alternative 2:** Just override `execute()`
** Pros: Does not involve the template pattern, easier for new developers to understand.
** Cons: Classes that inherit from `UndoableCommand` must remember to call `super.execute()`, or lose the ability to undo/redo.

===== Aspect: How undo & redo executes

* **Alternative 1 (current choice):** Saves the entire address book.
** Pros: Easy to implement.
** Cons: May have performance issues in terms of memory usage.
* **Alternative 2:** Individual command knows how to undo/redo by itself.
** Pros: Will use less memory (e.g. for `delete`, just save the person being deleted).
** Cons: We must ensure that the implementation of each individual command are correct.


===== Aspect: Type of commands that can be undone/redone

* **Alternative 1 (current choice):** Only include commands that modifies the address book (`add`, `clear`, `edit`).
** Pros: We only revert changes that are hard to change back (the view can easily be re-modified as no data are * lost).
** Cons: User might think that undo also applies when the list is modified (undoing filtering for example), * only to realize that it does not do that, after executing `undo`.
* **Alternative 2:** Include all commands.
** Pros: Might be more intuitive for the user.
** Cons: User have no way of skipping such commands if he or she just want to reset the state of the address * book and not the view.
**Additional Info:** See our discussion  https://github.com/se-edu/addressbook-level4/issues/390#issuecomment-298936672[here].


===== Aspect: Data structure to support the undo/redo commands

* **Alternative 1 (current choice):** Use separate stack for undo and redo
** Pros: Easy to understand for new Computer Science student undergraduates to understand, who are likely to be * the new incoming developers of our project.
** Cons: Logic is duplicated twice. For example, when a new command is executed, we must remember to update * both `HistoryManager` and `UndoRedoStack`.
* **Alternative 2:** Use `HistoryManager` for undo/redo
** Pros: We do not need to maintain a separate stack, and just reuse what is already in the codebase.
** Cons: Requires dealing with commands that have already been undone: We must remember to skip these commands. Violates Single Responsibility Principle and Separation of Concerns as `HistoryManager` now needs to do two * different things.
// end::undoredo[]

// tag::orders[]
=== Orders

Orders refer to the sales orders that will be added by the salesperson to ContactSails.
These orders can be added to any particular person of the address book.
After being added, orders can be edited and deleted.

==== Current Implementation

An `Order` is represented in the application as shown in _Figure 11_ given below.

// UML Diagram for Order
.UML Diagram for Order
image::OrderUMLDiagram.png[width="500" align="center"]

A brief description of each of the attributes of an `Order` is given below: +

* OrderInformation: Represents information about the order item. +
* OrderStatus: Denotes whether the sales order is ongoing or has been fulfilled by the salesperson. +
* Price: Represents the price of a single item of the sales order. +
* Quantity: Represents the number of items in the sales order. +
* DeliveryDate: Represents the date by which the sales order must be fulfilled. +

As orders are added to a particular person, there exists an association between a `Person` object and an `Order` object.
This relationship is shown in _Figure 20_ given below.

// UML Diagram showing association between a Person and an Order
.UML Diagram showing association between a Person and an Order
image::PersonOrderAssociationUMLDiagram.png[width="500" align="center"]

The association is implemented in the following manner:
[source,java]
----
public class Person {

    // ... other Person attributes ...

    private final UniquePersonOrderList personOrders;
}
----

----
public class PersonOrder {

    Person person;
    Order order;

    // ... PersonOrder attribute getters and setters ...
}
----

Operations on orders can be done using the `AddOrderCommand`, `EditOrderCommand`, and `DeleteOrderCommand` commands.
These commands are described in more detail below. +

===== Adding Orders

The `AddOrderCommand` adds an order to the person specified by their `index` in the last shown listing of persons.

The following snippet shows how the `executeUndoableCommand()` method updates the `model` of the address book
application by adding `orderToAdd` to the list of orders of the `person` specified. Note that `orderToAdd` will
not be added if the `person` has not been found or a duplicate order has already been assigned to this `person`.

[source,java]
----
public class AddOrderCommand extends UndoableCommand {
    public CommandResult executeUndoableCommand() throws CommandException {
        requireNonNull(model);
        try {
            model.addOrderToPerson(person, orderToAdd);
        } catch (PersonNotFoundException pnfe) {
            throw new AssertionError("The target person cannot be missing");
        } catch (DuplicateOrderException e) {
            throw new CommandException(MESSAGE_ORDER_NOT_ADDED);
        }

        // ... display updated address book ...
    }
}
----

The order added will be displayed in the address book.

===== Editing Orders

The `EditOrderCommand` edits the `targetOrder` with the provided information which is specified by its `index`
in the last shown listing of orders. The order will be updated with the information stored in `editOrderDescriptor`
object.

A new class called `EditOrderDescriptor` is defined to create the `editOrderDescriptor` object that stores the new values
of the fields that need to be edited. Each non-empty field value will replace the corresponding field value of the `order`.

The constructors of this class are shown below:
[source,java]
----
public static class EditOrderDescriptor {
    public EditOrderDescriptor() {}

    /**
     * Copy constructor.
     */
    public EditOrderDescriptor(EditOrderDescriptor toCopy) {
        setOrderInformation(toCopy.orderInformation);
        setOrderStatus(toCopy.orderStatus);
        setPrice(toCopy.price);
        setQuantity(toCopy.quantity);
        setDeliveryDate(toCopy.deliveryDate);
    }
}
----

The `EditOrderDescriptor` uses Optionals to return `Optional.empty()` if any of the field values are null.
If `Optional.empty()` is returned for any field, that particular field does not need to be edited.

The `createEditedOrder()` method constructs the edited order. Finally, the `executeUndoableCommand()` method calls the `createEditedOrder()` method
for getting the edited order and updates the `model` of the application.

[source,java]
----
public class EditOrderCommand extends UndoableCommand {
    public CommandResult executeUndoableCommand() throws CommandException {
        try {
            model.updateOrder(orderToEdit, editedOrder);
        } catch (DuplicateOrderException doe) {
            throw new CommandException(MESSAGE_DUPLICATE_ORDER);
        } catch (OrderNotFoundException onfe) {
            throw new AssertionError("The target order cannot be missing");
        }

        // ... display updated address book ...
    }
}
----

The new order returned is now stored in the address book in the place of the old order.

===== Deleting Orders

The `DeleteOrderCommand` deletes the order specified by its `index` in the last shown listing of orders.

The code snippet below shows the `executeUndoableMethod()` of the `DeleteOrderCommand` class:

[source,java]
----
public class DeleteOrderCommand extends UndoableCommand {
    public CommandResult executeUndoableCommand() {
        requireNonNull(orderToDelete);
        try {
            model.deleteOrder(orderToDelete);
        } catch (OrderNotFoundException onfe) {
            throw new AssertionError("The target order cannot be missing");
        }

        // ... display updated address book ...
    }
}
----

The above method deletes `orderToDelete` from the `model` of the address book and the resulting list of orders is displayed.

===== Displaying Orders In GUI

A single `Order` is displayed using an `OrderListCard` (refer to Figure 21 below). The list of all orders in the address book is then displayed in a list
using the `OrderListPanel`.

.OrderListCard FXML Render
image::OrderListCardFXMLRender.png[width="150" align="center"]

==== Design Considerations

===== Aspect: Data structures to support order operations

* **Alternative 1 (current choice):** Using the `PersonOrder` association class.
** Pros: Duplicate orders (with the same information except the person associated with it) will just be stored as a
single order in memory. If multiple persons have the same order, there will be multiple references to one `Order` object.
** Cons: Harder to implement as updating or deleting orders for one person must not affect orders of another person having
the same order.
* **Alternative 2:** Store a `UniqueOrderList` of orders in each person.
** Pros: Easier to implement.
** Cons: Higher memory usage might affect the performance of the application.
// end::orders[]

// tag::dataencryption[]
=== Data Encryption

==== Current Implementation

The address book will decrypt and encrypt the XML data file every time there is an update that needs to be made to the data
being stored.

The secret key for encryption/decryption is generated using the `javax.crypto` library.

The actual encryption/decryption is done using the `org.apache.xml.security` library, specifically the `XMLCipher` class.

==== Design Considerations
// end::dataencryption[]

===== Aspect: Time of encryption of XML data file

* **Alternative 1 (current choice):** Encrypt/decrypt the whole file each time there is an update to what information needs to stored.
** Pros: A new secret key can be used for each encryption/decryption, which would make it more secure against tampering or outsider access.
** Cons: Encryption of data file for every minor change can reduce the performance of the application.
* **Alternative 2:** Encrypt/decrypt the file only after a set time interval.
** Pros: Performance will be improved.
** Cons: Approach might be less secure. Implementation can also be harder.

=== Logging

We are using `java.util.logging` package for logging. The `LogsCenter` class is used to manage the logging levels and logging destinations.

* The logging level can be controlled using the `logLevel` setting in the configuration file (See <<Implementation-Configuration>>)
* The `Logger` for a class can be obtained using `LogsCenter.getLogger(Class)` which will log messages according to the specified logging level
* Currently log messages are output through: `Console` and to a `.log` file.

*Logging Levels*

* `SEVERE` : Critical problem detected which may possibly cause the termination of the application
* `WARNING` : Can continue, but with caution
* `INFO` : Information showing the noteworthy actions by the App
* `FINE` : Details that is not usually noteworthy but may be useful in debugging e.g. print the actual list instead of just its size


// tag::calendarEntries[]
=== Calendar and Event tracking

Events refer to meetings, deadlines and order deliveries created by users in ContactSails.
Users can create, edit and delete events, and existing events are displayed in a calendar interface within the application.

==== Current Implementation

`CalendarEvent` represents an event created by users.

A `CalendarEvent` is implemented in the following manner:
[source,java]
----
public class CalendarEvent {

    private final String entryTitle;
    private final StartDate startDate;
    private final EndDate endDate;
    private final StartTime startTime;
    private final EndTime endTime;


    // ... Order attribute getters and setters ...

}
----

The following is a brief description of the attributes of `CalendarEvent`:

* entryTitle: Represents title of event.
* startDate: Represents starting date of the event in DD-MM-YYYY format.
* endDate: Represents ending date of the event in DD-MM-YYYY format.
* startTime: Represents starting time of the event in HH:MM format (24-Hour format).
* endTime: Represents ending time of the event in HH:MM format (24-Hour format).

Events management is facilitated by `ModelManager`, which resides inside `Model`.
It is supported by `UserEventsManager` residing inside `UserEvents`, which supports the adding, removing and editing of `CalendarEvent`(e.g. `addEvent`, `deleteEvent`).
Orders of a person will also appear as `CalendarEvent` based on the `DeliveryDate` attribute of the `Order`.

The following diagram shows class diagram of `Model` Component related to `CalendarEvent`.

.`Model` Component showing classes related to events management
image::UserEventClassDiagram.png[width="800" align="center"]

In the Figure 22, `ModelManager` creates an instance of `UserEvents` interface, which provides the `UserEvents` API for `ModelManager` to implement.
`UserEventsManager` implements methods used by users to add, edit or delete `CalendarEvent`, which contains information of an event. `CalendarEvent` is stored in the `UniqueEventList`. +

`Logic` Component contains the commands required to manage user's events (e.g. `AddEventCommand`, `deleteEventCommand`).

The sequence diagram below shows how add event operation works:

.Sequence Diagram for adding of an event into ContactSails
image::AddEventSD.png[width="800" align="center]

In Figure 23, when a user enters the command to add an event, `AddEventCommand` will call `addEvent()` in `ModelManager`.
`ModelManager` in turn calls `addEvent()` in `UserEventsManager`, which creates a new `CalendarEvent` containing the information given by user.
`UserEventsManager` will then add `CalendarEvent` to `UniqueEventList`. If addition of event is a success, control is eventually returned from `UserEventsManager` to `AddEventCommand`.

Events added, removed or modified by users will have their intended results displayed by the `CalendarUi` residing inside `Ui` Component.
The `CalendarUi` can display dates in a week, month and year format, depending on user inputs. +
Storing of `CalendarEvent` data is managed by `CalendarStorage` within `Storage` Component, converting `CalendarEvent` to `XmlAdaptedEvent` to store in a .xml file.

==== Design Considerations

===== Aspect: Implementation of feature as a whole
* **Alternative 1 (current choice):** Creates a localised version of Calendar where all data related to it is stored locally.
** Pros: Does not require constant Internet access to manage data of Calendar.
** Cons: Disallows quick synchronisation between this Calendar and other Calendar applications, such as Google Calendar, that users might use. There are much more areas in the code that potentially contains hidden bugs.

* **Alternative 2:** Uses a third-party library such as Google Calendar API to manage.
** Pros: Does not require substantial maintenance of related code as less code is required to implement the feature. Some third-party libraries allows users to access some existing calendar applications, saving time required to transfer their calendar events.
** Cons: Some third-party libraries use REST APIs, which would require users to have Internet access to edit their Calendars. Some libraries will periodically prompt for authentication of user to continue to use their API, which can be a problematic if authentication process is changed in the future.
// end::calendarEntries[]

[[Implementation-Configuration]]
=== Configuration

Certain properties of the application can be controlled (e.g App name, logging level) through the configuration file (default: `config.json`).

== Documentation

We use asciidoc for writing documentation.

[NOTE]
We chose asciidoc over Markdown because asciidoc, although a bit more complex than Markdown, provides more flexibility in formatting.

=== Editing Documentation

See <<UsingGradle#rendering-asciidoc-files, UsingGradle.adoc>> to learn how to render `.adoc` files locally to preview the end result of your edits.
Alternatively, you can download the AsciiDoc plugin for IntelliJ, which allows you to preview the changes you have made to your `.adoc` files in real-time.

=== Publishing Documentation

See <<UsingTravis#deploying-github-pages, UsingTravis.adoc>> to learn how to deploy GitHub Pages using Travis.

=== Converting Documentation to PDF format

We use https://www.google.com/chrome/browser/desktop/[Google Chrome] for converting documentation to PDF format, as Chrome's PDF engine preserves hyperlinks used in webpages.

Here are the steps to convert the project documentation files to PDF format.

.  Follow the instructions in <<UsingGradle#rendering-asciidoc-files, UsingGradle.adoc>> to convert the AsciiDoc files in the `docs/` directory to HTML format.
.  Go to your generated HTML files in the `build/docs` folder, right click on them and select `Open with` -> `Google Chrome`.
.  Within Chrome, click on the `Print` option in Chrome's menu.
.  Set the destination to `Save as PDF`, then click `Save` to save a copy of the file in PDF format. For best results, use the settings indicated in the screenshot below.

.Saving documentation as PDF files in Chrome
image::chrome_save_as_pdf.png[width="300" align="center"]

[[Testing]]
== Testing

=== Running Tests

There are three ways to run tests.

[TIP]
The most reliable way to run tests is the 3rd one. The first two methods might fail some GUI tests due to platform/resolution-specific idiosyncrasies.

*Method 1: Using IntelliJ JUnit test runner*

* To run all tests, right-click on the `src/test/java` folder and choose `Run 'All Tests'`
* To run a subset of tests, you can right-click on a test package, test class, or a test and choose `Run 'ABC'`

*Method 2: Using Gradle*

* Open a console and run the command `gradlew clean allTests` (Mac/Linux: `./gradlew clean allTests`)

[NOTE]
See <<UsingGradle#, UsingGradle.adoc>> for more info on how to run tests using Gradle.

*Method 3: Using Gradle (headless)*

Thanks to the https://github.com/TestFX/TestFX[TestFX] library we use, our GUI tests can be run in the _headless_ mode. In the headless mode, GUI tests do not show up on the screen. That means the developer can do other things on the Computer while the tests are running.

To run tests in headless mode, open a console and run the command `gradlew clean headless allTests` (Mac/Linux: `./gradlew clean headless allTests`)

=== Types of tests

We have two types of tests:

.  *GUI Tests* - These are tests involving the GUI. They include,
.. _System Tests_ that test the entire App by simulating user actions on the GUI. These are in the `systemtests` package.
.. _Unit tests_ that test the individual components. These are in `seedu.address.ui` package.
.  *Non-GUI Tests* - These are tests not involving the GUI. They include,
..  _Unit tests_ targeting the lowest level methods/classes. +
e.g. `seedu.address.commons.StringUtilTest`
..  _Integration tests_ that are checking the integration of multiple code units (those code units are assumed to be working). +
e.g. `seedu.address.storage.StorageManagerTest`
..  Hybrids of unit and integration tests. These test are checking multiple code units as well as how the are connected together. +
e.g. `seedu.address.logic.LogicManagerTest`


=== Troubleshooting Testing
**Problem: `HelpWindowTest` fails with a `NullPointerException`.**

* Reason: One of its dependencies, `UserGuide.html` in `src/main/resources/docs` is missing.
* Solution: Execute Gradle task `processResources`.

== Dev Ops

This section covers the build automation tools, coverage reporting tools and other tools used in ContactSails.
It also covers the steps required to create new releases and manage dependencies.

=== Build Automation

See <<UsingGradle#, UsingGradle.adoc>> to learn how to use Gradle for build automation.

=== Continuous Integration

We use https://travis-ci.org/[Travis CI] and https://www.appveyor.com/[AppVeyor] to perform _Continuous Integration_ on our projects. See <<UsingTravis#, UsingTravis.adoc>> and <<UsingAppVeyor#, UsingAppVeyor.adoc>> for more details.

=== Coverage Reporting

We use https://coveralls.io/[Coveralls] to track the code coverage of our projects. See <<UsingCoveralls#, UsingCoveralls.adoc>> for more details.

=== Documentation Previews
When a pull request has changes to asciidoc files, you can use https://www.netlify.com/[Netlify] to see a preview of how the HTML version of those asciidoc files will look like when the pull request is merged. See <<UsingNetlify#, UsingNetlify.adoc>> for more details.

=== Making a Release

Here are the steps to create a new release.

.  Update the version number in link:{repoURL}/src/main/java/seedu/address/MainApp.java[`MainApp.java`].
.  Generate a JAR file <<UsingGradle#creating-the-jar-file, using Gradle>>.
.  Tag the repo with the version number. e.g. `v0.1`
.  https://help.github.com/articles/creating-releases/[Create a new release using GitHub] and upload the JAR file you created.

=== Managing Dependencies

A project often depends on third-party libraries. For example, ContactSails depends on the http://wiki.fasterxml.com/JacksonHome[Jackson library] for XML parsing. Managing these _dependencies_ can be automated using Gradle. For example, Gradle can download the dependencies automatically, which is better than these alternatives: +

* Include those libraries in the repo. (this bloats the repo size) +
* Require developers to download those libraries manually. (this creates extra work for developers)

[[GetStartedProgramming]]
[appendix]
== Suggested Programming Tasks to Get Started

Suggested path for new programmers:

1. First, add small local-impact (i.e. the impact of the change does not go beyond the component) enhancements to one component at a time.

2. Next, add a feature that touches multiple components to learn how to implement an end-to-end feature across all components. <<GetStartedProgramming-RemarkCommand>> explains how to go about adding such a feature.

[[GetStartedProgramming-RemarkCommand]]
=== Creating a new command: `remark`

By creating this command, you will get a chance to learn how to implement a feature end-to-end, touching all major components of the app.

*Scenario:* You are a software maintainer for `addressbook`, as the former developer team has moved on to new projects. The current users of your application have a list of new feature requests that they hope the software will eventually have. The most popular request is to allow adding additional comments/notes about a particular contact, by providing a flexible `remark` field for each contact, rather than relying on tags alone. After designing the specification for the `remark` command, you are convinced that this feature is worth implementing. Your job is to implement the `remark` command.

==== Description
Edits the remark for a person specified in the `INDEX`. +
Format: `remark INDEX r/[REMARK]`

Examples:

* `remark 1 r/Likes to drink coffee.` +
Edits the remark for the first person to `Likes to drink coffee.`
* `remark 1 r/` +
Removes the remark for the first person.

==== Step-by-step Instructions

===== [Step 1] Logic: Teach the app to accept 'remark' which does nothing
Let's start by teaching the application how to parse a `remark` command. We will add the logic of `remark` later.

**Main:**

. Add a `RemarkCommand` that extends link:{repoURL}/src/main/java/seedu/address/logic/commands/UndoableCommand.java[`UndoableCommand`]. Upon execution, it should just throw an `Exception`.
. Modify link:{repoURL}/src/main/java/seedu/address/logic/parser/AddressBookParser.java[`AddressBookParser`] to accept a `RemarkCommand`.

**Tests:**

. Add `RemarkCommandTest` that tests that `executeUndoableCommand()` throws an Exception.
. Add new test method to link:{repoURL}/src/test/java/seedu/address/logic/parser/AddressBookParserTest.java[`AddressBookParserTest`], which tests that typing "remark" returns an instance of `RemarkCommand`.

===== [Step 2] Logic: Teach the app to accept 'remark' arguments
Let's teach the application to parse arguments that our `remark` command will accept. E.g. `1 r/Likes to drink coffee.`

**Main:**

. Modify `RemarkCommand` to take in an `Index` and `String` and print those two parameters as the error message.
. Add `RemarkCommandParser` that knows how to parse two arguments, one index and one with prefix 'r/'.
. Modify link:{repoURL}/src/main/java/seedu/address/logic/parser/AddressBookParser.java[`AddressBookParser`] to use the newly implemented `RemarkCommandParser`.

**Tests:**

. Modify `RemarkCommandTest` to test the `RemarkCommand#equals()` method.
. Add `RemarkCommandParserTest` that tests different boundary values
for `RemarkCommandParser`.
. Modify link:{repoURL}/src/test/java/seedu/address/logic/parser/AddressBookParserTest.java[`AddressBookParserTest`] to test that the correct command is generated according to the user input.

===== [Step 3] Ui: Add a placeholder for remark in `PersonCard`
Let's add a placeholder on all our link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`] s to display a remark for each person later.

**Main:**

. Add a `Label` with any random text inside link:{repoURL}/src/main/resources/view/PersonListCard.fxml[`PersonListCard.fxml`].
. Add FXML annotation in link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`] to tie the variable to the actual label.

**Tests:**

. Modify link:{repoURL}/src/test/java/guitests/guihandles/PersonCardHandle.java[`PersonCardHandle`] so that future tests can read the contents of the remark label.

===== [Step 4] Model: Add `Remark` class
We have to properly encapsulate the remark in our link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`] class. Instead of just using a `String`, let's follow the conventional class structure that the codebase already uses by adding a `Remark` class.

**Main:**

. Add `Remark` to model component (you can copy from link:{repoURL}/src/main/java/seedu/address/model/person/Address.java[`Address`], remove the regex and change the names accordingly).
. Modify `RemarkCommand` to now take in a `Remark` instead of a `String`.

**Tests:**

. Add test for `Remark`, to test the `Remark#equals()` method.

===== [Step 5] Model: Modify `Person` to support a `Remark` field
Now we have the `Remark` class, we need to actually use it inside link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`].

**Main:**

. Add `getRemark()` in link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`].
. You may assume that the user will not be able to use the `add` and `edit` commands to modify the remarks field (i.e. the person will be created without a remark).
. Modify link:{repoURL}/src/main/java/seedu/address/model/util/SampleDataUtil.java/[`SampleDataUtil`] to add remarks for the sample data (delete your `addressBook.xml` so that the application will load the sample data when you launch it.)

===== [Step 6] Storage: Add `Remark` field to `XmlAdaptedPerson` class
We now have `Remark` s for `Person` s, but they will be gone when we exit the application. Let's modify link:{repoURL}/src/main/java/seedu/address/storage/XmlAdaptedPerson.java[`XmlAdaptedPerson`] to include a `Remark` field so that it will be saved.

**Main:**

. Add a new Xml field for `Remark`.

**Tests:**

. Fix `invalidAndValidPersonAddressBook.xml`, `typicalPersonsAddressBook.xml`, `validAddressBook.xml` etc., such that the XML tests will not fail due to a missing `<remark>` element.

===== [Step 6b] Test: Add withRemark() for `PersonBuilder`
Since `Person` can now have a `Remark`, we should add a helper method to link:{repoURL}/src/test/java/seedu/address/testutil/PersonBuilder.java[`PersonBuilder`], so that users are able to create remarks when building a link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`].

**Tests:**

. Add a new method `withRemark()` for link:{repoURL}/src/test/java/seedu/address/testutil/PersonBuilder.java[`PersonBuilder`]. This method will create a new `Remark` for the person that it is currently building.
. Try and use the method on any sample `Person` in link:{repoURL}/src/test/java/seedu/address/testutil/TypicalPersons.java[`TypicalPersons`].

===== [Step 7] Ui: Connect `Remark` field to `PersonCard`
Our remark label in link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`] is still a placeholder. Let's bring it to life by binding it with the actual `remark` field.

**Main:**

. Modify link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`]'s constructor to bind the `Remark` field to the `Person` 's remark.

**Tests:**

. Modify link:{repoURL}/src/test/java/seedu/address/ui/testutil/GuiTestAssert.java[`GuiTestAssert#assertCardDisplaysPerson(...)`] so that it will compare the now-functioning remark label.

===== [Step 8] Logic: Implement `RemarkCommand#execute()` logic
We now have everything set up... but we still can't modify the remarks. Let's finish it up by adding in actual logic for our `remark` command.

**Main:**

. Replace the logic in `RemarkCommand#execute()` (that currently just throws an `Exception`), with the actual logic to modify the remarks of a person.

**Tests:**

. Update `RemarkCommandTest` to test that the `execute()` logic works.

==== Full Solution

See this https://github.com/se-edu/addressbook-level4/pull/599[PR] for the step-by-step solution.

[appendix]
== Product Scope

This section states the intended users of ContactSails, the value ContactSails should bring to them and
contributions of every developer in the team in regards to developing ContactSails to meet the proposed value.

*Target user profile*: ContactSails is meant for salespersons from small companies or home-grown businesses with customers from various social media platforms.

A typical user from our target user profile:

* promotes and sells products or services through social media.
* works in a small company or runs his/her own business.
* has limited applications to support their marketing strategies.
* has a need to manage a large number of contacts.
* has many contacts spread across many social media platforms such as Facebook, Twitter, Instagram, etc.
* has many contacts with volatile details.
* has many contacts that can be grouped together based on type of products purchased by contacts.
* prefer desktop apps over other types.
* can type fast.
* prefers typing over mouse input.
* is reasonably comfortable using CLI apps.

*Value proposition*: ContactSails serve as the consolidation platform for all contacts from different platforms for
 users to communicate with customers more easily, analyse and apply their marketing strategies more effectively and efficiently.

*Feature Contribution:*

1. *Aadyaa Maddi*
* *Major Feature*: Ability to manage customer orders.
** Orders can be added, edited, and deleted.
** A list of current orders can be viewed.
** Orders can also be marked as ongoing or fulfilled.
* *Minor Feature*: Encryption of application data.
* *How the above features fit into the product scope:*
** *Major Feature*: For salespersons, this feature will be essential to have as they would want to keep track of what their customers are ordering and what they have ordered already.
If customers have any issues regarding their orders, salespersons will be able to view all the relevant information in a single place.
** *Minor Feature*: Since ContactSails has a lot of personal details of customers, the owner of the address book would want to encrypt the application data file to prevent outside access to sensitive information.

2. *Alicia Ho Sor Sian*
* *Major Feature*: Ability to manage events which are displayed in a calendar.
** Allows users to add, edit or delete events, which can represent meetings or deadlines including order deliveries.
** Once set, the event will be displayed in ContactSails' calendar, which shows all incoming events for the current month and after.
** Orders set by users will automatically appear in the calendar without the user having to create an event for it.
* *Minor Feature*: Classifying tags into two categories, groups and preferences.
** Create 2 distinct categories of tags representing groups that a contact belongs to and preferences that a contact has.
** Each category is displayed at a separate location in the Ui.
* *How the above features fit into the product scope:*
** *Major Feature*: The calendar can remind salespersons any impending meetings or deadlines especially order deliveries to save time in planning their next course of action carefully.
It provides a quicker way to manage events compared to using other calendar applications that mainly relies on GUI input.
** *Minor Feature*: Groups can be used to indicate which social media platform does the salesperson use to communicate with a particular contact, while preferences indicates the products and services a contact usually purchases.
Using separate labels for groups and preferences placed at separate locations in the Ui display gives a more organised display of a contact's information, allowing salespersons to derive important information of their contacts quickly.

3. *Ang Jing Zhe*
* *Major Feature*: Addition of person panel to the user interface.
** It allows users to see their contacts' information in a neater and more detailed manner.
** An alternative consideration is to vary the amount of information put up at the panel.
* *Minor Feature*: Adding colours to tags.
** Putting colours to tags so that it looks more user friendly.
* *How the above features fit into the product scope:*
** *Major Feature*: Users can see their contacts' information more clearly and neatly.
** *Minor Feature*: Colours are more eye-catching and help users to identify different tags.

4. *Kevin Yeong Yu Heng*
* *Major Feature*: Ability to import and export contacts from and to other formats.
** Allows user to export contacts to a local contact files and import contacts from local contact files.
** The exported file can integrate in the users' workflow which might include external manipulation of the data such as printing a hardcopy of the contact list or using it in an external spreadsheet software.
* *Minor Feature*: Ability to generate and display a list of relevant fields of multiple contacts.
** Ability to only show certain fields associated to contacts selected by filters.
** Displays the information in a list rather and excludes other information which is not needed by the user.
* *How the above features fit into the product scope:*
** *Major Feature*: The export and import facility enables users to use the data from ContactSails solely as an addressbook, but gives them the option to more easily integrate it to their current application processes which might allow them to be more efficient in their work.
** *Minor Feature*: The more targeted listing feature allows users fit more relevant data into their screen which helps them to focus on the data they need while minimising other non essential information.


[appendix]
== User Stories

The following table shows all user stories collected thus far.
Priority indicates importance of implementing the user story.
Release indicates the version of ContactSails that has already implemented the user story.

Priorities: High (must have) - `* * \*`, Medium (nice to have) - `* \*`, Low (unlikely to have) - `*`

[width="59%",cols="20%,<20%,<20%,<20%,<20%",options="header",]
|=======================================================================
|Priority |As a ... |I want to ... |So that I can... |Release
|`* * *` |new user |see usage instructions |refer to instructions when I forget how to use the App |1.0

|`* * *` |user |add a new person |add new entries |1.0

|`* * *` |user |delete a person |remove entries that I no longer need |1.0

|`* * *` |user |find a person by name |locate details of persons without having to go through the entire list |1.0

|`* * *` |user |keep an offline back up |download and access a local copy of the application data |2.0

|`* * *` |lazy user |use short-forms for commands |execute commands more quickly |1.0

|`* * *` |task-oriented user |implement meetings or deadlines for contacts |keep track of tasks to do for the contacts |1.5

|`* * *` |organized user |delete multiple contacts at a time |remove the contacts I no longer need quickly |2.0

|`* * *` |user with many contacts |remove a specific tag |all contacts with that tag will have the tag removed instead of removing the tag from from every one of them |1.2

|`* * *` |user with many contacts |find contacts based on the group they are in |see all contacts belonging to a certain group |1.2

|`* * *` |user with many contacts |sort the contacts by last contacted time |find contacts I corresponded with recently |2.0

|`* * *` |salesperson |view a list of current orders| keep track of which customers I might need to contact at that point in time |2.0

|`* * *` |salesperson |see a list of current customers |view necessary information about current customers more quickly |2.0

|`* * *` |salesperson |send promotions to a group of contacts |ensure my differentiated marketing strategies work |2.0

|`* * *` |salesperson |add a list of preferences to contact |know what my customers are interested in |1.2

|`* * *` |salesperson |edit contact’s preferences |update my customers' changing interests |1.2

|`* * *` |salesperson |see the top preference among all contacts |know what products I should focus on |2.0

|`* * *` |salesperson |edit specific details of contacts |update my customers' information more conveniently |2.0

|`* * *` |salesperson |see top contacts |divide my attention among my customers as needed |2.0

|`* *` |salesperson |export contacts |share my customers' public details with concerned businesses |2.0

|`* *` |user |hide <<private-contact-detail,private contact details>> by default |minimize chance of someone else seeing them by accident |1.0

|`* *` |user who prefers visual imagery |use a calendar to know if there are any tasks or deadlines |clearer view on how to prioritise my work |1.5

|`* *` |user |access and change my preferred Email Service provider within the ContactSails |look at my emails and my contacts at the same time |2.0

|`* *` |user with many contacts |synchronise the ContactSails with Google Contacts |save time importing contacts from Google Contacts |2.0

|`* *` |user who is fast at typing |copy a contact's email to the clipboard without using a mouse |save time in emailing a contact |2.0

|`* *` |lazy user |add contact details in any order |don't need to remember the order to enter the details |1.5

|`* *` |lazy user |auto-completion of commands |execute commands quickly |1.1

|`* *` |user |add notes to a contact |have a clearer description about the contact |2.0

|`* *` |user |group contacts using tags |categorize my customers as needed |1.5

|`* *` |user |change the theme and font of the application |personalize my AddressBook |1.5

|`* *` |salesperson |see contact statistics |more informed about my customer demographic |2.0

|`*` |user with many persons in the address book |sort persons by name |locate a person easily |2.0

|`*` |user |export contacts in different formats |share contacts to other software |2.0

|`*` |user who likes personalising contacts |add profile photos to each contact |recognise the customer easily based on their photo |2.0

|`*` |user |see a list of tags |don't need to remember all existing tags |2.0

|=======================================================================

[appendix]
== Use Cases

The below use cases indicate how ContactSails and its users should interact in each use case.

(For all use cases below, the *System* is the `ContactSails` and the *Actor* is the `user`, unless specified otherwise)

[discrete]
=== Use case: Delete person

*MSS*

1.  User requests to list persons.
2.  ContactSails shows a list of persons.
3.  User requests to delete a specific person in the list.
4.  ContactSails deletes the person.
+
Use case ends.

*Extensions*

[none]
* 2a. The list is empty.
+
Use case ends.

[none]
* 3a. The given index is invalid.
+
[none]
** 3a1. ContactSails shows an error message.
+
Use case resumes at step 2.

[discrete]
=== Use case: Add person

*MSS*

1.	User requests to add specific person.
2.	ContactSails adds the person.
+
Use case ends.

*Extensions*

[none]
* 1a. User enters invalid format for the Add feature.
+
[none]
** 1a1. ContactSails shows an error message.
+
Use case ends.

[none]
* 1b. User enters exact details of person existing in ContactSails.
+
[none]
** 1b1. ContactSails shows an error message.
+
Use case ends.

[discrete]
=== Use case: List current customers

*MSS*

1.  User requests for current customers.
2.  ContactSails finds and displays a list of the list of customers whose orders are currently being fulfilled by user.
+
Use case ends.

*Extensions*

[none]
* 2a. The list is empty as there are no current orders.
+
[none]
** 2a1. ContactSails shows an error message.
+
Use case ends.

[discrete]
=== Use case: Edit specific details of contacts

*MSS*

1.  User selects contact to edit from the current list of contacts.
2.  ContactSails shows the selected contact.
3.  User requests to edit a certain field of the contact.
4.  ContactSails updates the contact details and shows contact details after the changes made.
+
Use case ends.

*Extensions*

[none]
* 1a. User selects invalid contact.
+
[none]
** 1a1. ContactSails shows an error message.
+
Use case ends.

[none]
* 2a. User selects invalid field to edit.
+
[none]
** 2a1. ContactSails shows an error message.
+
Use case resumes at step 2.

[discrete]
=== Use case: Add notes to contacts

*MSS*

1. User requests to list persons.
2. ContactSails shows a list of persons.
3. User requests to add notes to specific person in the list.
4. ContactSails adds notes to the specified person.
+
Use case ends.

*Extensions*

[none]
* 2a. The list is empty.
+
Use case ends.

[none]
* 3a. The given index is invalid.
+
[none]
** 3a1. ContactSails shows an error message.
+
Use case resumes at step 2.

[discrete]
=== Use case: Add contact specific tasks

*MSS*

1.  User selects contact to add a task for and enters task description and deadline.
2.  ContactSails adds task to specified contact and shows a success message.
+
Use case ends.

*Extensions*

[none]
* 1a. User selects invalid contact.
+
[none]
** 1a1. ContactSails shows an error message.
+
Use case ends.

[none]
* 1b. User enters invalid task details.
+
[none]
** 1b1. ContactSails shows en error message.
+
Use case ends.

[discrete]
=== Use case: Find persons by name

*MSS*

1.	User requests to find persons with specific names.
2.	ContactSails shows list of persons with specified names.
+
Use case ends.

*Extensions*

[none]
* 1a. User does not specify any name.
+
[none]
** 1a1. ContactSails shows an error message.
+
Use case ends.

[none]
* 1b. ContactSails does not have any names specified by user.
+
** 1b1. ContactSails shows empty list.
+
Use case ends.

[discrete]
=== Use case: Find persons by groups

*MSS*

1.	User requests to find persons with specific groups.
2.	ContactSails shows list of persons with specified groups.
+
Use case ends.

*Extensions*

[none]
* 1a. User does not specify any group.
+
[none]
** 1a1. ContactSails shows an error message.
+
Use case ends.

[none]
* 1b. ContactSails does not have any groups specified by user.
+
[none]
** 1b1. ContactSails shows empty list.
+
Use case ends.

[discrete]
=== Use case: Find persons by preferences

*MSS*

1.	User requests to find persons with specific preferences.
2.	ContactSails shows list of persons with specified preferences.
+
Use case ends.

*Extensions*

[none]
* 1a. User does not specify any preference.
+
[none]
** 1a1. ContactSails shows an error message.
+
Use case ends.

[none]
* 1b. ContactSails does not have any preference specified by user.
+
[none]
** 1b1. ContactSails shows empty list.
+
Use case ends.

[discrete]
=== Use case: Remove specific group

*MSS*

1.  User requests to remove a group and enters group they want to remove.
2.  ContactSails removes the specific group from all contacts who have this group assigned to them.
+
Use case ends.

*Extensions*

[none]
* 2a. There are no groups.
+
[none]
** 2a1. ContactSails shows an error message.
+
Use case ends.

[none]
* 2a. User enters invalid group.
+
[none]
** 2a1. ContactSails shows an error message.
+
Use case resumes at step 1.

[discrete]
=== Use case: Remove specific preference

*MSS*

1.  User requests to remove a preference enters the preference they want to remove.
2.  ContactSails removes the specific preference from all contacts who have this group assigned to them.
+
Use case ends.

*Extensions*

[none]
* 2a. There are no preferences.
+
[none]
** 2a1. ContactSails shows an error message.
+
Use case ends.

[none]
* 2a. User enters invalid preference.
+
[none]
** 2a1. ContactSails shows an error message.
+
Use case resumes at step 1.

[discrete]
=== Use case: Add order

*MSS*

1.	User requests to add order to a specific person.
2.	ContactSails adds the order.
+
Use case ends.

*Extensions*

[none]
* 1a. User enters invalid format for the AddOrder command.
+
[none]
** 1a1. ContactSails shows an error message.
+
Use case ends.

[none]
* 1a. User adds a duplicate order.
+
[none]
** 1a1. ContactSails shows an error message.
+
Use case ends.

[discrete]
=== Use case: Delete order

*MSS*

1.  User requests to list orders.
2.  ContactSails shows a list of orders.
3.  User requests to delete a specific order in the list.
4.  ContactSails deletes the order from the application.
+
Use case ends.

*Extensions*

[none]
* 2a. The list is empty.
+
Use case ends.

[none]
* 3a. The given index is invalid.
+
[none]
** 3a1. ContactSails shows an error message.
+
Use case resumes at step 2.

[discrete]
=== Use case: Export contacts

*MSS*

1.  User selects contacts to export from the current list of contacts.
2.  ContactSails stores the selection and processes the contacts to export.
3.  User requests to create a file containing the selected contacts.
4.  ContactSails creates the file and prompts for save location of file.
5.  User specifies location of file to be saved.
6.  ContactSails saves the file and shows a success message.
+
Use case ends.

*Extensions*

[none]
* 1a. User does not select any contact.
+
[none]
** 1a1. ContactSails shows an error message.
+
Use case ends.

[none]
* 1b. User makes an invalid selection.
+
[none]
** 1b1. ContactSails shows an error message.
+
Use case ends.

[none]
* 4a. ContactSails is unable to create the file with selected contacts.
+
[none]
** 4a1. ContactSails shows an error message.
+
Use case resumes at step 1.

[none]
* 6a. ContactSails is unable to save the file in the specified location.
+
[none]
** 6a1. ContactSails shows an error message.
+
Use case resumes at step 5.

[none]
* *a. User cancels the operation at any time.
+
[none]
** *a1. ContactSails shows an error message.
+
Use case ends.

[discrete]
=== Use case: Store a local backup of contacts

*MSS*

1.  User requests to create a backup file containing all the data stored in the application.
2.  ContactSails prompts user to indicate save location.
3.  User specifies location of file to be saved.
4.  ContactSails saves the file in the location specified and shows a success message.
+
Use case ends.

*Extensions*

[none]
* 2a. ContactSails is unable to create the file.
+
[none]
** 2a1. ContactSails shows an error message.
+
Use case ends.

[none]
* 4a. ContactSails is unable to save the file in the specified location.
+
[none]
** 4a1. ContactSails shows an error message.
+
Use case resumes at step 3.

[appendix]
== Non Functional Requirements

The requirements indicate the constraints that ContactSails have to be developed with.

.  ContactSails should work on any <<mainstream-os,mainstream OS>> as long as it has Java `1.8.0_60` or higher installed.
.  ContactSails should be able to hold up to 1000 persons without a noticeable sluggishness in performance for typical usage.
.  A user with above average typing speed for regular English text (i.e. not code, not system admin commands) should be able to accomplish most of the tasks faster using commands than using the mouse.
.  ContactSails should be usable even for users without experience in using command line applications.
.  Users should be able to download ContactSails for free as ContactSails is modified from an open-source software.
.  ContactSails should continue to run the original, intended functions, even when problems occur during execution.
.  In sessions when ContactSails has crashed, changes made to it during those sessions should not be lost.
.  Size of ContactSails should not exceed 1GB even with many contacts stored in it (maximum number of contacts allowed is 1000)
.  ContactSails should take up to 2 seconds to execute any command except for commands that are reliant on internet connectivity.
.  ContactSails can still work even if there is limited internet connectivity when executed commands open websites.
.  Users can use ContactSails without requiring an installer.
.  Data of ContactSails should be stored locally and in a human editable text file.
.  Data of ContactSails should be able to be encrypted such that only the user can see it when text file containing the data is directly accessed.
.  ContactSails should not be required to print any detailed reports of contacts.

[appendix]
== Glossary

[[mainstream-os]] Mainstream OS::
Windows, Linux, Unix, OS-X

[[contacts]] Contacts::
People whose details are present in ContactSails.

[[private-contact-detail]] Private contact detail::
A contact detail that is not meant to be shared with others.

[[groups]] Group::
A label attached to a person's contact information for the purpose of grouping persons.

[[preferences]] Preference::
A label attached to a person's contact information for the purpose of providing more specific details of person's interests.

[[tasks]] Tasks::
A deadline, reminder, or a general note that can be added to keep track of things needed to be done.

[[mss]] MSS::
Represents the most straightforward interaction between System and User where nothing goes wrong, in a use case.

[[extenstions]] Extensions::
Represents interactions between System and User where something might have gone wrong.

[[profile-photo]] Profile Photo::
A photograph attached to a certain contact to represent the person.

[[backup-file]] Backup File::
An XML data file that stores all data in the application in a local copy on my computer.

[[java-fx]] Java FX::
A software platform that contains a set of packages for graphics that enables developers to develop rich cross-platform applications.

[[travis]] Travis::
A hosted, distributed continuous integration service used to build and test software projects hosted at GitHub on a Linux virtual machine.

[[appveyor]] AppVeyor::
A hosted, distributed continuous integration service used to build and test software projects hosted at GitHub on a Windows virtual machine.

[appendix]
== Product Survey

The following indicates the structure that product surveys should have.

*Product Name*

Author: ...

Pros:

* ...
* ...

Cons:

* ...
* ...

[appendix]
== Instructions for Manual Testing

Given below are instructions to test the app manually.

[NOTE]
These instructions only provide a starting point for testers to work on; testers are expected to do more _exploratory_ testing.

=== Launch and Shutdown

. *Initial launch*

.. Download the jar file and copy into an empty folder.
.. Double-click the jar file. +
   Expected: Shows the GUI with a set of sample contacts. The window size may not be optimum.

. *Saving window preferences*

.. Resize the window to an optimum size. Move the window to a different location. Close the window.
.. Re-launch the app by double-clicking the jar file. +
   Expected: The most recent window size and location is retained.

_{ more test cases ... }_

=== Deleting a person

. *Deleting a person while all persons are listed*

.. Prerequisites:
** List all persons using the `list` command.
** There should be multiple persons in the list.
.. Test case: `delete 1` +
   Expected: First contact is deleted from the list. Details of the deleted contact shown in the status message. Timestamp in the status bar is updated.
.. Test case: `delete 0` +
   Expected: No person is deleted. Error details shown in the status message. Status bar remains the same.
.. Other incorrect delete commands to try: `delete`, `delete x` (where x is larger than the list size) _{give more}_ +
   Expected: Similar to previous.

_{ more test cases ... }_

=== Saving data

. *Dealing with missing/corrupted data files*

.. _{explain how to simulate a missing/corrupted file and the expected behavior}_

_{ more test cases ... }_
